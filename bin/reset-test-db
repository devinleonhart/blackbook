#!/bin/bash

# Reset and seed test database
echo "Resetting test database..."

# Ensure containers are running
docker compose up -d

# Wait for database to be ready
echo "Waiting for database to be ready..."
sleep 5

# Reset and seed test database
docker compose exec blackbook bundle exec rails db:reset RAILS_ENV=test
docker compose exec blackbook bundle exec rails db:seed RAILS_ENV=test

echo "Test database reset and seeded successfully!"
echo "Admin login: admin@blackbook.dev / password123"
