<section id="favorites-index-view" class="bb-page">
  <% render partial: "shared/capture_navbar" %>
  <% content_for :head do %>
    <meta name="turbo-cache-control" content="no-cache">
  <% end %>

  <div class="bb-container">

    <!-- Page Header -->
    <div class="bb-page-header">
      <h1 class="bb-heading-xl">Your Favorites</h1>
      <p class="bb-subtitle">Your favorited images, grouped by universe.</p>
    </div>

    <% if @favorites_by_universe.blank? %>
      <!-- Empty State -->
      <div class="bb-card bb-card--panel">
        <%= render partial: "shared/empty_banner", locals: { message: "No favorites yet. Favorite an image to see it here." } %>
      </div>
    <% else %>
      <!-- Favorites by Universe -->
      <div class="space-y-10">
        <% @universes.each do |universe| %>
          <% images = @favorites_by_universe[universe] || [] %>

          <!-- Universe Section -->
          <div class="bb-card bb-card--panel">
            <div class="flex items-center justify-between mb-6">
              <div>
                <h2 class="bb-section-heading--sm mb-0">
                  <%= link_to universe.name, universe_path(universe), class: "hover:underline text-blue-700" %>
                </h2>
                <p class="bb-subtitle-sm"><%= pluralize(images.size, "favorite") %></p>
              </div>
            </div>

            <%= render partial: "shared/image_list", locals: { images: images, universe: universe } %>
          </div>
        <% end %>
      </div>
    <% end %>

  </div>
</section>
